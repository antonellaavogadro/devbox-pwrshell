name: powershell-customization-test
image: microsoftwindowsdesktop_windows-ent-cpc_win11-22h2-ent-cpc-m365@1.0.0
hostInformation: general_a_8c32gb256ssd_v1
supportsHibernation: false
setupTasks:
  - task: powershell
    inputs:
      command: | 
        `$shenanigansfile= `""`$env:TEMP\\shenanigans.txt"`"
        Write-Host 'This is a message that should be in the logs'
        'We are testing multi-line powershell scripts' | Tee-Object -FilePath shenanigansfile -Append
        'Embedded into a single devbox.yaml' | Tee-Object -FilePath shenanigansfile -Append
        Write-Host 'This should also go to the logs'
        exit 0
  - task: choco
    inputs:
      packages: "git"
      PackageVersions: {"git":"2.38.1"}
  - task: choco
    inputs:
      packages: "googlechrome"

  # - task: powershell
  #   inputs:
  #     command: | 
  #       `$value1= `"20`"
  #       `$value2= `"20`"
  #       Write-Host 'Adding two numbers'
  #       Write-Host `$value1
  #       `$value3= `[int]`$value1 + `[int]`$value2
  #       `$sumfile= `"'`$env:TEMP\\sumfile40.txt'`"
  #       `$value3 | Tee-Object -FilePath sumfile -Append
  #       Write-Host 'This should also go to the logs'
  #       exit 0  
